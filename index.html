<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kasir Obat</title>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #f2f2f2; }
    h2 { margin-bottom: 20px; }
    select, input[type=number] { padding: 8px; margin: 5px; width: 250px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    table, th, td { border: 1px solid #ddd; }
    th, td { padding: 10px; text-align: left; }
    button { padding: 8px 16px; margin-top: 10px; }
  </style>
</head>
<body>

<h2>Kasir Obat</h2>

<label for="obat">Pilih Obat:</label><br>
<select id="obat" style="width:300px;">
  <option disabled selected>Pilih obat...</option>
</select><br>

<label for="jumlah">Jumlah:</label><br>
<input type="number" id="jumlah" min="1" value="1"><br>
<button onclick="tambahObat()">Tambah</button>

<h3>Daftar Transaksi</h3>
<table id="tabel">
  <thead>
    <tr>
      <th>Nama Obat</th>
      <th>Harga</th>
      <th>Jumlah</th>
      <th>Total</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h3>Total Harga: <span id="total">0</span></h3>

<!-- Script -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script>
  const daftarObat = {
    "ACYCLOVIR 400": 56500, "ACYCLOVIR CR": 4000, "ALLOPURINOL": 20500, "AMLODIPIN 10MG HJ": 49000,
    "AMLODIPIN 5MG HJ": 26500, "ANDALAN PIL": 15500, "ANTASIDA POT": 9000, "AXAPROFEN": 44000,
    "BINTAMOX SYR": 9000, "BIOPLACENTON": 29000, "CALCIFAR": 21000, "CALCIFAR PLUS": 23000,
    "CAVIPLEX SYR": 12000, "CEFIXIM SYR": 11000, "CETERIZIN": 24500, "CETERIZIN SYR": 5500,
    "COMBANTRIN CAIR": 27500, "CTM": 10000, "CTM POT": 4000, "DEXAMETHASON 0,5": 9000,
    "DEXTAF": 20500, "DEXTEEM PLUS": 31500, "DICLOFENAC SODIUM": 21000, "EMTURNAS TAB": 23500,
    "ERLA SM": 12000, "ERLA TM": 12000, "ERPHAFLAM": 23000, "ETABION": 29000,
    "ETAMOX": 60500, "ETAMOX FORTE SYR": 10500, "ETAMOX SYR": 7500, "FASIDOL FORTE SYR": 8000,
    "FLACOID 0,5 POT": 5500, "FLUCADEX SYR": 10500, "GASTRUCID SYR": 8500, "GIOVAN BIRU": 10500,
    "GIOVAN PINK": 11000, "HIDROCORTISON": 5500, "HUFAXOL SYR": 6500, "ITRABAT": 12500,
    "KAOTIN SYR": 9500, "KASSA KOTAK": 9000, "KERTAS PUYER": 9500, "KETOKONAZOLE CR": 4000,
    "KETOKONAZOLE TAB": 25500, "KLIP BESAR": 22000, "KLIP SEDANG": 7500, "LANSOPRAZOLE": 14000,
    "METAMIZOLE": 35500, "METRONIDAZOLE TAB": 25500, "METYLPREDNISOLON 4": 25500, "MIRATRIM SYR": 8000,
    "MOLACORT 0,75": 33000, "MYCROGYNON": 23500, "NISAGON": 7500, "OBH ITRASAL": 8000,
    "OMEDOM": 25000, "OMEDOM SYR": 6000, "ONDANSETRON 4": 50000, "ONDANSETRON 8": 75000,
    "ONDANSETRON INJ": 4000, "ORALIT": 34000, "PACETIK": 23000, "PACETIK SYR": 5500,
    "PIROXICAM 20": 14000, "PREDINSON POT": 11500, "PREDNISON": 15000, "PYREXIN 80 SUPP": 7500,
    "QUANTIDEX SYR": 9000, "RANITIDIN": 23000, "RANITIDIN INJ": 6500, "ROVERTON SYR": 6000,
    "SALBRON 2MG": 25500, "SALBRON 4MG": 27500, "SAMCONAL": 18500, "SELTIFORT SYR": 7500,
    "SPASMINAL": 78000, "SUCRALFATE SYR": 13000, "TERNIK PLUS SYR": 7500, "TERNIK SYR": 7000,
    "TRIANTA": 26500, "TRIANTA SYR": 8000, "VESPERUM DROP": 13000, "VESPERUM SYR": 8000,
    "ZENSODERM": 7500, "ZULTROP": 32500, "TRISELA SYR": 7500, "MIRASIC TAB": 32000,
    "ASMEF HJ": 25000, "VITAMIN C POT": 28000
  };

  // Isi dropdown
  const selectObat = document.getElementById('obat');
  for (let nama in daftarObat) {
    const option = document.createElement('option');
    option.value = nama;
    option.textContent = nama;
    selectObat.appendChild(option);
  }

  $(document).ready(function() {
    $('#obat').select2({
      placeholder: 'Cari nama obat...',
      allowClear: true
    });
  });

  function tambahObat() {
    const nama = document.getElementById('obat').value;
    const jumlah = parseInt(document.getElementById('jumlah').value);
    if (!nama || jumlah < 1) return;

    const harga = daftarObat[nama];
    const total = harga * jumlah;

    const tbody = document.querySelector('#tabel tbody');
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${nama}</td>
      <td>${harga.toLocaleString()}</td>
      <td>${jumlah}</td>
      <td>${total.toLocaleString()}</td>
      <td><button onclick="hapusBaris(this)">Hapus</button></td>
    `;
    tbody.appendChild(tr);
    updateTotal();
  }

  function hapusBaris(btn) {
    btn.parentElement.parentElement.remove();
    updateTotal();
  }

  function updateTotal() {
    let total = 0;
    const rows = document.querySelectorAll('#tabel tbody tr');
    rows.forEach(row => {
      const subtotal = parseInt(row.children[3].textContent.replace(/,/g, ''));
      total += subtotal;
    });
    document.getElementById('total').textContent = total.toLocaleString();
  }
</script>

</body>
</html>
