<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kerjaan lala!!!!</title>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    label, select, input, button {
      display: block;
      margin-bottom: 10px;
      width: 100%;
      max-width: 400px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #999;
      padding: 8px;
      text-align: left;
    }
    #output {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h2>Kasir Apotek Meysha</h2>

  <label for="obat">Pilih Obat:</label>
  <select id="obat" class="js-example-basic-single">
    <option value="">-- Pilih --</option>
  </select>

  <label for="jumlah">Jumlah:</label>
  <input type="number" id="jumlah" placeholder="Masukkan jumlah" />

  <button onclick="tambahTransaksi()">Tambah Transaksi</button>
  <button id="exportPDF">Export ke PDF</button>

  <div id="output">
    <h3>Transaksi:</h3>
    <table id="tabelTransaksi">
      <thead>
        <tr>
          <th>Nama Obat</th>
          <th>Harga Satuan</th>
          <th>Jumlah</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <!-- Baris transaksi akan ditambahkan di sini -->
      </tbody>
      <tfoot>
        <tr>
          <th colspan="3">Total Bayar</th>
          <th id="totalBayar">Rp 0</th>
        </tr>
      </tfoot>
    </table>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script>
    const dataObat = {
      "ACYCLOVIR 400": 56500,
      "ACYCLOVIR CR": 4000,
      "ALLOPURINOL": 20500,
      "AMLODIPIN 10MG HJ": 49000,
      "AMLODIPIN 5MG HJ": 26500,
      "ANDALAN PIL": 15500,
      "ANTASIDA POT": 9000,
      "AXAPROFEN": 44000,
      "BINTAMOX SYR": 9000,
      "BIOPLACENTON": 29000,
      "CALCIFAR": 21000,
      "CALCIFAR PLUS": 23000,
      "CAVIPLEX SYR": 12000,
      "CEFIXIM SYR": 11000,
      "CETERIZIN": 24500,
      "CETERIZIN SYR": 5500,
      "COMBANTRIN CAIR": 27500,
      "CTM": 10000,
      "CTM POT": 4000,
      "DEXAMETHASON 0,5": 9000,
      "DEXTAF": 20500,
      "DEXTEEM PLUS": 31500,
      "DICLOFENAC SODIUM": 21000,
      "EMTURNAS TAB": 23500,
      "ERLA SM": 12000,
      "ERLA TM": 12000,
      "ERPHAFLAM": 23000,
      "ETABION": 29000,
      "ETAMOX": 60500,
      "ETAMOX FORTE SYR": 10500,
      "ETAMOX SYR": 7500,
      "FASIDOL FORTE SYR": 8000,
      "FLACOID 0,5 POT": 5500,
      "FLUCADEX SYR": 10500,
      "GASTRUCID SYR": 8500,
      "GIOVAN BIRU": 10500,
      "GIOVAN PINK": 11000,
      "HIDROCORTISON": 5500,
      "HUFAXOL SYR": 6500,
      "ITRABAT": 12500,
      "KAOTIN SYR": 9500,
      "KASSA KOTAK": 9000,
      "KERTAS PUYER": 9500,
      "KETOKONAZOLE CR": 4000,
      "KETOKONAZOLE TAB": 25500,
      "KLIP BESAR": 22000,
      "KLIP SEDANG": 7500,
      "LANSOPRAZOLE": 14000,
      "METAMIZOLE": 35500,
      "METRONIDAZOLE TAB": 25500,
      "METYLPREDNISOLON 4": 25500,
      "MIRATRIM SYR": 8000,
      "MOLACORT 0,75": 33000,
      "MYCROGYNON": 23500,
      "NISAGON": 7500,
      "OBH ITRASAL": 8000,
      "OMEDOM": 25000,
      "OMEDOM SYR": 6000,
      "ONDANSETRON 4": 50000,
      "ONDANSETRON 8": 75000,
      "ONDANSETRON INJ": 4000,
      "ORALIT": 34000,
      "PACETIK": 23000,
      "PACETIK SYR": 5500,
      "PIROXICAM 20": 14000,
      "PREDINSON POT": 11500,
      "PREDNISON": 15000,
      "PYREXIN 80 SUPP": 7500,
      "QUANTIDEX SYR": 9000,
      "RANITIDIN": 23000,
      "RANITIDIN INJ": 6500,
      "ROVERTON SYR": 6000,
      "SALBRON 2MG": 25500,
      "SALBRON 4MG": 27500,
      "SAMCONAL": 18500,
      "SELTIFORT SYR": 7500,
      "SPASMINAL": 78000,
      "SUCRALFATE SYR": 13000,
      "TERNIK PLUS SYR": 7500,
      "TERNIK SYR": 7000,
      "TRIANTA": 26500,
      "TRIANTA SYR": 8000,
      "VESPERUM DROP": 13000,
      "VESPERUM SYR": 8000,
      "ZENSODERM": 7500,
      "ZULTROP": 32500,
      "TRISELA SYR": 7500,
      "MIRASIC TAB": 32000,
      "ASMEF HJ": 25000,
      "VITAMIN C POT": 28000
    };

    const selectObat = document.getElementById('obat');
    const tbody = document.querySelector('#tabelTransaksi tbody');
    const totalBayarEl = document.getElementById('totalBayar');

    // Isi dropdown obat
    Object.keys(dataObat).forEach(nama => {
      const option = document.createElement('option');
      option.value = nama;
      option.textContent = nama;
      selectObat.appendChild(option);
    });

    // Aktifkan Select2
    $(document).ready(function() {
      $('.js-example-basic-single').select2({
        placeholder: "Cari atau pilih obat...",
        allowClear: true
      });
    });

    let totalBayar = 0;

    function tambahTransaksi() {
      const nama = selectObat.value;
      const jumlah = parseInt(document.getElementById('jumlah').value);

      if (!nama || !jumlah || jumlah <= 0) {
        alert("Pilih obat dan jumlah yang benar!");
        return;
      }

      const harga = dataObat[nama];
      const total = harga * jumlah;
      totalBayar += total;

      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${nama}</td>
        <td>Rp ${harga.toLocaleString()}</td>
        <td>${jumlah}</td>
        <td>Rp ${total.toLocaleString()}</td>
      `;
      tbody.appendChild(row);
      totalBayarEl.textContent = `Rp ${totalBayar.toLocaleString()}`;

      // Reset input
      selectObat.value = "";
      $('#obat').val(null).trigger('change');
      document.getElementById('jumlah').value = "";
    }

    document.getElementById('exportPDF').addEventListener('click', function () {
      const element = document.getElementById('output');
      const opt = {
        margin: 0.3,
        filename: 'transaksi_obat.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'cm', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    });
  </script>

</body>
</html>
